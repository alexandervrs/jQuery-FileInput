;$.fn.fileInput=function(e){var t={filenameClass:"filename",browseButtonClass:"browse",filenameHoverClass:"filename-hover",browseButtonHoverClass:"browse-hover",filenameDisabledClass:"filename-disabled",browseButtonDisabledClass:"browse-disabled",renderFilename:true,renderBrowseButton:true,labelFilename:"No file selected",labelBrowseButton:"Browse&#8230;",labelMultipleSelected:"files selected",labelMultipleCount:false,labelFilenameDisabled:"Cannot select file",labelBrowseButtonDisabled:"Browse&#8230;",labelFilenameMaxChars:0,labelFilenameEllipsis:"&#8230;",fileDragAndDrop:true,debugMode:false};var e=$.extend(t,e);return this.each(function(){if(navigator.appVersion.indexOf("MSIE")!=-1){if(parseFloat(navigator.appVersion.split("MSIE")[1])<8){return false}}var t=$(this);t.css({overflow:"hidden"});var n=t.offset();var r=$(this).children('input[type="file"]');var s={width:r.width()-2,height:r.height()/2+3};r.attr("class","");r.attr("style","");if(e.renderFilename==true){t.prepend('<span class="'+e.filenameClass+'">'+e.labelFilename+"</span>")}if(e.renderBrowseButton==true){t.prepend('<span class="'+e.browseButtonClass+'">'+e.labelBrowseButton+"</span>")}r.css({position:"absolute",overflow:"hidden",opacity:"0","-moz-opacity":"0",height:"100%",outline:"0","z-index":parseInt(t.css("z-index")+1,10)});if(e.debugMode){r.css({opacity:"0.5","-moz-opacity":"0.5"})}var o=t.children("."+e.filenameClass);var u=t.children("."+e.browseButtonClass);if(e.renderFilename==false&&e.renderBrowseButton==true){u.css("width","100%")}if(e.renderBrowseButton==false&&e.renderFilename==true){o.css("width","100%")}r.attr("title",e.labelFilename);if(e.fileDragAndDrop==false){$(r).on({dragenter:function(e){e.stopPropagation();e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"},dragover:function(e){e.stopPropagation();e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"}})}if(r.attr("disabled")){r.attr("title",e.labelFilenameDisabled);t.children("."+e.filenameClass).addClass(e.filenameDisabledClass);t.children("."+e.browseButtonClass).addClass(e.browseButtonDisabledClass);t.children("."+e.filenameDisabledClass).html(e.labelFilenameDisabled);t.children("."+e.browseButtonDisabledClass).html(e.labelBrowseButtonDisabled)}if(!r.attr("disabled")){if(e.filenameHoverClass!=""){t.on("mouseover",function(){t.children("."+e.filenameClass).addClass(e.filenameHoverClass)});t.on("mouseout",function(){t.children("."+e.filenameClass).removeClass(e.filenameHoverClass);t.children("."+e.filenameHoverClass).addClass(e.filenameClass)})}if(e.browseButtonHoverClass!=""){t.on("mouseover",function(){t.children("."+e.browseButtonClass).addClass(e.browseButtonHoverClass)});t.on("mouseout",function(){t.children("."+e.browseButtonClass).removeClass(e.browseButtonHoverClass);t.children("."+e.browseButtonHoverClass).addClass(e.browseButtonClass)})}r.on("focus",function(){t.children("."+e.filenameClass).addClass(e.filenameHoverClass);t.children("."+e.browseButtonClass).addClass(e.browseButtonHoverClass);r.css({outline:"0",top:"0px"})});r.on("blur",function(){t.children("."+e.filenameClass).removeClass(e.filenameHoverClass);t.children("."+e.browseButtonClass).removeClass(e.browseButtonHoverClass)})}t.on("mouseover",function(){n=t.offset()});t.children().on("contextmenu",function(e){return false});r.on("change",function(t){var n=r.val();n=n.replace(/^.*[\\\/]/,"");var s="";if(this.files){if(r.attr("multiple")){if(this.files.length>1){if(e.labelMultipleCount==true){for(i=0;i<this.files.length;i++){s=s+this.files[i].name+" \n"}s=this.files.length+" "+e.labelMultipleSelected+": \n"+s;n=this.files.length+" "+e.labelMultipleSelected}else{var u=[];for(i=0;i<this.files.length;i++){u.push(this.files[i].name)}n=u.join(", ")}}}}if(e.labelFilenameMaxChars!=0){if(n.length>e.labelFilenameMaxChars){o.html(n.substr(0,e.labelFilenameMaxChars)+e.labelFilenameEllipsis);r.attr("title",s)}else{o.html(n);r.attr("title",s)}}else{r.attr("title",s);o.html(n)}});r.on("mousemove touchmove touchstart touchend",function(e){r.css("left",e.pageX-n.left-s.width+8);r.css("top",e.pageY-n.top-s.height+4)});t.on("mousemove touchmove touchstart touchend",function(e){r.css("left",e.pageX-n.left-s.width+8);r.css("top",e.pageY-n.top-s.height+4)})})};